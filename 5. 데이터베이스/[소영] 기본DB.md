# 데이터베이스란?

DB :  여러 사람들이 공유하고 사용할 목적으로 통합 관리되는 **데이터들의 모임**

DBMS : 데이터베이스 관리 시스템, 사용자와 데이터베이스 사이에서 사용자의 요구에 따라 정보를 생성해 주고 데이터베이스를 관리해 주는 소프트웨어

DBA(DB Administrator) : DBMS를 전문적으로 관리하는 인력



![DataBase ](https://t1.daumcdn.net/cfile/tistory/993845445A67253915)

**식별자(identifier) :** 여러개의 집합체를 담고있는 관계형 데이터베이스에서 각각의 구분할 수 있는 논리적인 개념

**식별자의 특성**

유일성 : 하나의 릴레이션에서 모든 행은 서로 다른 **키** 값을 가져야 함

최소성 : 꼭 필요한 최소한의 속성들로만 키를 구성해야 함

**튜플(Tuple) :** 테이블에서 행, 레코드(Record) 혹은 로우(Row)라고 하기도 함, 튜플은 릴레이션에서 같은 값을 가질 수 없음, 튜플의 수는 카디날리티(Cardinality) 라고 함

**어트리뷰트(Attribute):** 테이블에서 열을 의미한다. 같은말로 칼럼(Columm)이라고도 하며 어트리뷰트(Attribute)의 수를 의미하는 단어는 디그리(Degree)라고 합니다.



# 무결성

1. 엔터티 무결성(Entity Integrity)

   - 엔터티에 존재하는 모든 인스턴스는 고유해야 함
   - 인스턴스를 대표하는 속성(Primary Key)에는 Null 값이 올 수 없음
   - → 엔터티에는 동일한 주 식별자가 존재할 수 없으며 주 식별자 속성은 모르는 값인 Null 값을 허용할 수 없음

2. 참조 무결성(Referential Integrity)

   - 즉 외래 식별자 속성 값이 상위 엔터티의 인스턴스에 반드시 존재하거나 Null 이어야 함
   - 참조 무결성은 두 엔터티의 연관된 인스턴스 사이에 일관성을 유지하기 위한 제약으로 사용
   - 이 제약은 관계형 데이터베이스에서 집합(엔터티) 사이에 연산할 수 있도록 하는 대단히 중요한 개념
   - 참조 무결성은 데이터 모델에서 **절대적으로 필요한 중요한 요소**이며 제약
   - 참조 무결성은 **FK(Foreign Key) 제약에 의해서 지켜짐**
   
3. 도메인 무결성(Domain Integrity)

   - 도메인 무결성은 속성 값과 관련된 제약
   - 엔터티의 특정 속성 값은 동일한 데이터 타입, 길이, Null 허용 여부, 기본 값, 허용 값 등 동일한 범주의 값만이 존재해야 한다.
   - 동일한 속성에 사용되는 값들은 동일한 성격의 값이 사용되어야 한다.
   - 도메인 무결성은 기본 값, Null 허용 여부, 체크 조건 등으로 지켜질 수 있다.
   - 도메인 무결성 예시
     - 고객이름 속성에 "Homer"는 허용, 777은 불가
     - 전화번호 속성에 "555-5555"는 허용, "오오오~오오오오"는 불가

4. 업무 무결성(Business Integrity)

   - 업무 무결성은 기업에서 업무를 수행하는 방법이나 데이터를 처리하는 규칙

   - 넓게 보면 엔터티 무결성이나 참조 무결성, 도메인 무결성도 업무 무결성에 포함

   - 업무 무결성은 범위가 넓어 주로 프로그램(의 로직)에서 확인

   - 업무 무결성을 물리적으로 강제하는 대표적인 방법에는 트리거가 존재

   - 업무 무결성 예시

     - 주문 금액 3만 원 이상이면 무료배송

     - 초회 보험료를 입금하지 않은 보험 계약은 무효

       

# 여러가지 키

**후보키(Candidate Key)**

**1.** 후보키는 릴레이션을 구성하는 속성들 중에서 튜플을 유일하게 식별하기 위해 사용하는 속성들의 부분집합, 즉 기본키로 사용할 수 있는 속성들

**2.** 하나의 릴레이션내에서는 중복된 튜플들이 있을 수 없으므로 모든 릴레이션에는 반드시 하나 이상의 후보키가 존재

**3.** 후보키는 릴레이션에 있는 모든 튜플에 대해서 **유일성**과 **최소성을** 만족시켜야 한다.

> 유일성 : 하나의 키값으로 하나의 튜플만을 유일하게 식별할 수 있어야한다. 이름 -> 유일성 만족 안 됨, 학번, 주민등록번호 -> 만족
>
> 최소성 : 모든 레코드들을 유일하게 식별하는데 꼭 필요한 속성만으로 구성되어 있어야한다.



**기본키(Primary Key)**

**1.** 기본키는 후보키 중에서 선택한 주키(Main Key)이다.

**2.** 한 릴레이션(표)에서 특정 튜플(행)을 유일하게 구별할 수 있는 속성이다.

**3.** Null값을 가질 수 없다.

**4.** 동일한 값이 중복되어 저장될 수 없다.



**왜 이렇게 귀찮게 분리하고 정의하느냐?**

만약 기본키에 해당하는 정보들이 어떠한 사정 또는 이유 때문에 중복이 되어야 한다면 기본키를 다시 정해줘야 하기 때문에



**대체키(Alternate Key)**

**1.** 후보키가 둘 이상일 때 기본키를 제외한 나머지 후보키들

**2.** 보조키라고도 함



**외래키(Foregin Key)**

**1.** 관계를 맺고 있는 릴레이션 R1,R2에서 릴레이션 R1이 참조하고 있는 릴레이션 R2의 기본키와 같은 R1 릴레이션의 속성을 외래키라고 함

**2.** 외래키는 참조되는 릴레이션의 기본키와 대응되어 릴레이션 간에 참조관계를 표현하는데 중요한 도구



**복합키(Compound Key)**

**1.** 기본키가 되지 못하는 컬럼들을 서로 묶어서 기본키처럼 사용하는 것

**2.**  복합키는 **2개 이상의 컬럼을** 묶어서 만들 수 있음

**3.**  기본키의 조건에 만족할때까지 컬럼들을 묶어주면서 복합키를 완성시키면 됨

**4.**  기본키를 만드는 것이 중요하며, 복합키 또한 최대한 컬럼을 적게 묶는것이 중요



**슈퍼키(Super Key)**

**1.**  테이블에서 **각 행을 유일하게 식별할 수 있는 하나 또는 그 이상의 속성들의 집합**

**2.** 슈퍼키는 유일성을 만족, 최소성은 만족하지 않음

> 최소성 : 학번 + 주민번호를 사용하여 슈퍼키를 만들면 다른 튜플들과 구분할 수 있는 **유일성은 만족**하지만 학번이나 주민번호 하나만 가지고도 다른 튜플들을 구분할 수 있으므로 최소성은 만족시키지 못함





<img src="/Users/lsy/Library/Application Support/typora-user-images/image-20210717095615153.png" alt="image-20210717095615153" style="zoom:50%;" />





<img src="/Users/lsy/Library/Application Support/typora-user-images/image-20210717095637446.png" alt="image-20210717095637446" style="zoom:50%;" />



# 트리거

- 트리거(Trigger)는 특정 테이블에 INSERT, DELETE, UPDATE 같은 DML 문이 수행되었을 때**, **데이터베이스에서 **자동으로 동작**하도록 작성된 프로그램

- 사용자가 직접 호출하는 것이 아니라, 데이터베이스에서 **특정 이벤트가 발생하면 자동**으로 실행

- 데이터를 삭제하기 전에 그 내용을 다른곳에 먼저 복사해 놓으면 되지만, 매번 이런 작업을 수작업으로 하게 된다면? 데이터의 신뢰성이 떨어지고, 데이터의 구조도 망가지게 되는 경우가 생길 수 있음

  이러한 실수를 대비하기 위해 자동으로 삭제 작업이 일어날 경우 삭제 되기 전에 미리 다른 곳에 삭제될 데이터를 *자동으로 저장해 주는 기능* 이 대표적인 **트리거(TRIGGER)**의 사용 용도



# 출처

 https://noahlogs.tistory.com/36 

무결성  https://coding-factory.tistory.com/221

키

- https://coding-factory.tistory.com/entry/DB%EA%B8%B0%EC%B4%88-%EC%97%AC%EB%9F%AC%EA%B0%80%EC%A7%80-%ED%82%A4%EA%B8%B0%EB%B3%B8%ED%82%A4%ED%9B%84%EB%B3%B4%ED%82%A4%EC%99%B8%EB%9E%98%ED%82%A4%EB%93%B1%EC%9D%98-%EC%A2%85%EB%A5%98%EC%99%80-%EA%B0%9C%EB%85%90

- https://jerryjerryjerry.tistory.com/49


